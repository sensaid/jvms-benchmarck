version: '3'
services:
  spring-boot-openjdk:
    image: "vehicle-information-utility-openjdk"
    container_name: vehicle-information-utility-openjdk
  spring-boot-correttojdk:
    image: "vehicle-information-utility-correttojdk"
    container_name: vehicle-information-utility-correttojdk
  spring-boot-zulu:
    image: "vehicle-information-utility-zulu"
    container_name: vehicle-information-utility-zulu
  spring-boot-graalvmce:
    image: "vehicle-information-utility-graalvmce"
    container_name: vehicle-information-utility-graalvmce
  haproxy:
    image: "haproxy:1.7"
    depends_on:
    - "vehicle-information-utility-correttojdk"
    - "vehicle-information-utility-openjdk"
    - "vehicle-information-utility-zulu"
    - "vehicle-information-utility-graalvmce"
    ports:
    - "8080:8080"
    volumes:
    - ./haproxy:/usr/local/etc/haproxy
    container_name: haproxy
  prometheus:
    depends_on:
    - "vehicle-information-utility-openjdk"
    - "vehicle-information-utility-correttojdk"
    - "vehicle-information-utility-zulu"
    - "vehicle-information-utility-graalvmce"
    image: "prom/prometheus"
    ports:
    - "9090:9090"
    volumes:
     - ./prom-jdks.yml:/etc/prometheus/prometheus.yml
    container_name: prometheus
  grafana:
     image: "grafana/grafana"
     ports:
     - "3000:3000"
     container_name: grafana
